<!DOCTYPE html>
<html lang="{{ language }}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
{% if ticket %}
{{ ticket.passenger.formatted_name or 'Passenger' }}'s {{ airline_name }} Fly Fun Boarding Pass
{% else %}
Fly Fun Boarding Pass Disclaimer
{% endif %}
</title>

<style>
body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  margin: 20px;
}

.disclaimer {
  background-color: #f1f1f1;
  border-radius: 5px;
  padding: 20px;
  margin-bottom: 20px;
}
.category {
    font-weight: bold;
}
.language-switcher {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.language-switcher .logo {
    width: 100px;
    margin-right: 20px;
}
.language-buttons a {
    background-color: #f1f1f1;
    border-radius: 5px;
    padding: 10px;
    margin: 0 10px;
    text-decoration: none;
    color: #000;
}

.language-buttons a:hover {
    background-color: #ddd;
}

.logo-text {
    font-size: 2rem;
    font-weight: bold;
}

.logo-container {
    display: flex;
    align-items: center;
}

h2 {
  margin-bottom: 10px;
}

form {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
label {
    display: flex;
    align-items: center;
    justify-content: center;
}
#submit-link {
    margin-top: 10px;
    opacity: 1.0;
}

.boarding-section {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
.boarding-pass {
    border-radius: 12px;
    background-color: transparent;
    width: 350px;
    overflow: hidden;
}

.boarding-header {
    background-color: {{ pass_background_color }};
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
    border-bottom-left-radius: 9px;
    border-bottom-right-radius: 9px;
    position: relative;
    z-index: 1;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
}

.boarding-body {
    padding: 10px;
    background-color: {{ pass_background_color }};
    border-top-left-radius: 9px;
    border-top-right-radius: 9px;
    position: relative;
    z-index: 1;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;

}

.boarding-qrcode {
    display: flex;
    background-color: {{ pass_background_color }};
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2);
}

.header-row-1 {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

.header-row-2 {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    font-size: 24px;
    width: 100%;
}

.flight-info {
    display: flex;
    gap: 10px;
}

.airline-name {
    font-size: 18px;
    font-weight: bold;
    color: {{ pass_foreground_color }};
}

.plane-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
}

.plane-icon img {
    width: 40px;
    height: 40px;
}

.label {
    display: block;
    text-transform: uppercase;
    font-size: 10px;
    color: {{ pass_label_color }};
}

.value {
    font-size: 14px;
    font-weight: bold;
    color: {{ pass_foreground_color }};
}

.value-large {
    font-size: 24px;
    font-weight: bold;
    color: {{ pass_foreground_color }};
}

.info-column {
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    padding: 10px;
    flex-basis: 50%;
}


.logo {
    width: 50px;
    height: 50px;
}
</style>
<script src="{{ root_path }}/static/js/qrcode.min.js"></script>
</head>
<body>

<div class="language-switcher">
    <div class="logo-container">
    <img src="{{ root_path }}/static/images/logo.png" alt="logo" width="100">
        <span class="logo-text">Fly Fun</span>
    </div>
    <div class="language-buttons">
        {% for lang_code, lang_name in available_languages.items() %}
        <a href="?ticket={{ ticket.ticket_identifier if ticket else '' }}&lang={{ lang_code }}">{{ lang_name }}</a>
        {% endfor %}
    </div>
</div>

{% if ticket %}
    {% include "boarding_pass_card.html" %}
    <div class="acknowledge">
    <form>
      <label>
        <input type="checkbox" id="agree-checkbox" value="1" checked>
        {{ localized_strings.get('I agree to the terms and conditions below', 'I agree to the terms and conditions below') }}
      </label>
      <a id="submit-link" href="{{ pkpass_url }}" download>
      <img id="submit-img" src="{{ root_path }}/static/images/AddToApple/{{ language }}/badge.svg" alt="Add to Apple Wallet" width="100">
      </a>
    </form>
    <script>
        const agreeCheckbox = document.getElementById('agree-checkbox');
        const submitLink = document.getElementById('submit-link');
        const submitImg = document.getElementById('submit-img');

        agreeCheckbox.addEventListener('change', function() {
            if (agreeCheckbox.checked) {
              submitLink.style.opacity = 1;
              submitImg.style.opacity = 1;
              submitLink.href = "{{ pkpass_url }}";
            } else {
              submitLink.style.opacity = 0.5;
              submitImg.style.opacity = 0.5;
              
              submitLink.removeAttribute('href');
            }
        });
    </script>
    </div>
{% endif %}

<div class="disclaimer">
{% if disclaimer_content %}
{{ disclaimer_content|safe }}
{% else %}
<p>No disclaimer available for this language ({{ language }}).</p>
{% endif %}
</div>

</body>
</html>

